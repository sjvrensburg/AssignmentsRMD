$if(answers)$
\documentclass[answers, addpoints, $if(fontsize)$$fontsize$$else$12pt$endif$]{exam}
$else$
\documentclass[addpoints, $if(fontsize)$$fontsize$$else$12pt$endif$]{exam}
$endif$

\usepackage{graphicx}

% We need simple wrappers around part, question and solution
\newenvironment{NMQ}[1]{
  \def\tempSize{#1}
  \question
}{
  \vspace{\tempSize}
}
\newenvironment{QUESTION}[2]{
  \def\tempSize{#2}
  \question[#1]
}{
  \vspace{\tempSize}
}
\newenvironment{SOLUTION}[1]{
  \begin{solution}[#1]
}{
  \end{solution}
}
\newenvironment{PARTS}{
  \begin{parts}
}{
  \end{parts}
  \droptotalpoints
  \newpage
}
\newenvironment{PART}[2]{
  \def\tempSize{#2}
  \part[#1]
}{
  \vspace{\tempSize}
}

\pagestyle{headandfoot}
\runningheadrule
\firstpageheader{$module$}{$title$}{$date$}

\runningheader{$module$}
{$title$, Page \thepage\ of \numpages}
{$date$}
\firstpagefooter{}{}{}
\runningfooter{}{}{}

\begin{document}

\begin{center}
\fbox{
  \fbox{
    \parbox{5.5in}{
      \centering
      Answer the questions in the spaces provided on the question sheets. If you run out of room for an answer, continue on the back of the page.
      }
    }
  }
\end{center}
\vspace{0.1in}
\makebox[\textwidth]{Student No.:\enspace\hrulefill}
\vspace{0.1in}
\makebox[\textwidth]{Surname, Name (Optional):\enspace\hrulefill}

\begin{center}
\gradetable[h][questions]
\end{center}

\begin{questions}
  \pointsinrightmargin
  \setlength{\rightpointsmargin}{1in}
  \bracketedpoints
  \marksnotpoints
  \totalformat{\fbox{Total for Question \thequestion: \totalpoints}}

  $body$

\end{questions}

\end{document}
